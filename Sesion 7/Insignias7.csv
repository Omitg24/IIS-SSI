Lab7: Seguridad de red;;;
Nivel de Insignia;Desbloqueada cuando;Notas;
Bronce;Sabes cómo permitir o denegar servicios/puertos del firewall;sudo ufw allow/deny <service/port number>;
Bronce;Sabes cómo agregar interfaces de red a las zonas del firewall ;Mediante la GUI, seleccionando la interfaz y cambiando su zona;
Bronce;Puedes permitir o denegar conexiones desde direcciones IP individuales o redes ;sudo ufw default allow outgoing;sudo ufw default deny infoming
Bronce;Puedes responder a esta pregunta: ¿Qué tipo de ataques mitigará potencialmente un límite de solicitudes a un servicio hecho por el firewall?;Ataques DDoS;
Bronce;Puedes responder a esta pregunta: ¿Cuál crees que es el propósito de registrar / auditar conexiones explícitamente prohibidas en el firewall?;Que cuando una de esas intente acceder, el firewall compruebe si está registrada y la bloquee;
Bronce;Puedes responder a estas preguntas: ¿Por qué crese que es útil prohibir las máquinas que realizan escaneos? PISTA: ¿Escaneas máquinas como parte de tu rutina normal?;Porque las máquinas pueden escanear los puertos con puertos maliciosos;Seguramente si, ya que gran cantidad de herramientas los realizan por detrás
Plata;Entiendes cómo realizar reenvío de puertos y como conectar máquinas en distintos segmentos de red separados por firewalls;Mediante la GUI, declarar un puerto que capture peticiones y las reenvíe a otros;
Plata;Entiendes por qué el bloqueo de IPs vía DNS es útil. Puede responder a esta pregunta: ¿Cuál es la ventaja de usar PiHole para bloquear IPs en lugar de un complemento de navegador de bloqueo de IPs maliciosas?;Evita acceder a sitios de publicidad, de forma que no se descarguen anuncios;
Plata;Puedes responder a estas preguntas: ¿Crees que fail2ban reemplaza a un firewall? ¿o lo complementa?;Lo complementa, añade una regla al firewall bloqueando algunos intentos de ataque;
Plata;Puedes responder a esta pregunta: ¿Qué tipo de ataques previene fail2ban?;Ataques automáticos, los identifica en los logs y añade una regla sobre éstos en el firewall;
Plata;Puedes responder a esta pregunta: ¿Crees que un bloqueo temporal es suficiente para prevenir un intento de ataque DoS?;Depende del puerto de ataque, si apunta a uno o pocos puertos, puede ser útil, dado que detecta IPs que envian paquetes y los bloquea en el firewall;
Plata;Puedes responder a estas preguntas: ¿Por qué crees que dejar los puertos abiertos a propósito puede ser una medida útil de detección de escaneos? Usando la lógica, ¿qué puertos dejarías abiertos de esta manera?;Porque puedes detectar si estas siendo atacado y tomar medidas contra estas IPs;Dejaría 443 y 80;
Plata;Puedes responder a estas preguntas: ¿Qué sucede cuando una máquina está bloqueada por portsentry? ¿La máquina bloqueada puede ponerse en contacto con la que bloquea o no?;Se bloquea en /etc/hosts.deny;No, ya que también está registrado en el firewall, que recharaza cualquer tráfico del cliente atacante;Para volver a permitir la conexión sudo route del -host <IP of the offending client> reject;
Plata;Puedes responder a estas preguntas: ¿Afectan los bloqueos de portsentry a la velocidad de escaneo? Si la respuesta es sí, ¿crees que esto también se puede utilizar como medida de seguridad?;Si, si se encuentra a alguien escaneando con portsentry, hara que el escaneo dure mucho;Sí, puede agotar a los atacantes y que se den por vencidos;
Oro;Puedes responder a esta pregunta: ¿Cuántas cosas crees que puedes hacer para proteger las conexiones ssh desde el punto de vista de la red? (piensa en combinar técnicas que vimos aquí y laboratorios anteriores);Prohibir algunas IPs para acceder al SSH con ufw, banear IPs tras varios Login fallidos, configurar jails con fail2ban, registrar y bloquear escaneos al puerto ssh con portsentry, todo ello sumado a otras cosas como permitir la conexión SSH a través de claves públicas, etc;
Oro;Puedes protegerte de los intentos de ataque a ssh (y ataques similares a otros servicios que hacen) con jails predefinidas de fail2ban.;Si, fail2ban tiene una jail predefinida para proteger ssh, solo se debe configurar lso parámetros en la forma que se prefiera para el nivel de seguridad, como el número máximo de logins antes de crear una regla en el firewall previniendo más peticiones;
Oro;"Puedes habilitar una ""trampa de escaneo de puertos"" en una máquina sin entrar en conflicto con el comportamiento normal del firewall. Puedes responder a esta pregunta:  si puedes recopilar las IP bloqueadas, ¿qué crearías con ellas?";Sí, se puede hacer cambiando algunos parámetros en algunos archivos. Específicamente, tenemos que cambiar de modo básico a modo sigiloso avanzado dentro del archivo /etc/default/portsentry, donde tenemos que cambiar los valores udp y tcp en TCP_MODE y UDP_MODE por los valores atcp y audp . Entonces podemos decidir qué valores usar en BLOCK_UDP y BLOCK_TCP en el fichero /etc/portsentry/portsentry.conf. Para registrar el tráfico sospechoso, opción "0". Para bloquear al cliente infractor (poner la trampa), opción "1". Para ejecutar un programa como respuesta, opción "2".;
Oro;Puedes implementar una conexión VPN de Wireguard entre un contenedor y la máquina virtual host.;Explicado en el guión;
Oro;Si tenemos servidores web en una red interna diferente de nuestra empresa, y desplegamos con éxito una conexión VPN como la que vimos en este laboratorio, puedes responder a esta pregunta: ¿qué característica de firewall crees que podrá proporcionar acceso a estos servidores web fácilmente?;Enrutamiento;
Platino;Protección contra las redes oscuras:  Tu conocimiento sobre la seguridad de red te permite implementar un servidor fortificado capaz de resistir los intentos de ataque de red más comunes contra los servicios típicos y como usuario final;Todo completado;
